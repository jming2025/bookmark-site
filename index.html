<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="AI Directory: Curated collection of AI chatbots, image generation tools, research sites, and platforms. Search and discover top AI resources."
    />
    <title>AI Directory - Your Gateway to Artificial Intelligence</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="nav.css" />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      crossorigin="anonymous"
    />
    <meta property="og:title" content="AI Directory - Your Gateway to Artificial Intelligence" />
    <meta property="og:description" content="Curated AI resources: chatbots, image generation, research, and tools." />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="AI Directory - Your Gateway to Artificial Intelligence" />
    <meta name="twitter:description" content="Curated AI resources: chatbots, image generation, research, and tools." />
  </head>
  <!-- Google tag (gtag.js) with Consent Mode + IP anonymization -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L70K7JXND9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }
  // Default: deny analytics until user consents
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied',
    'functionality_storage': 'granted',
    'security_storage': 'granted'
  });
  gtag('js', new Date());
  gtag('config', 'G-L70K7JXND9', { 'anonymize_ip': true });
</script>
  <body>
    <header>
      <nav>
        <div class="logo">AI Directory</div>
        <button class="menu-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="primary-nav">
          <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
        <div class="categories-menu" aria-label="Categories">
          <button class="categories-trigger" id="categories-trigger" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-list" aria-hidden="true"></i>
            <span class="cat-trigger-label">Categories</span>
            <i class="fas fa-chevron-down" aria-hidden="true"></i>
          </button>
          <div class="categories-dropdown" id="categories-dropdown" role="menu" aria-label="Categories"></div>
        </div>
        <div class="nav-links" id="primary-nav"></div>
        <form id="searchForm" class="search-container" role="search">
          <label for="searchInput" class="sr-only">Search AI websites</label>
          <input
            type="text"
            placeholder="Search AI websites..."
            id="searchInput"
            aria-label="Search AI websites"
          />
          <button type="submit" aria-label="Search"><i class="fas fa-search"></i></button>
        </form>
        <div id="searchSuggestions" class="search-suggestions" aria-live="polite" aria-atomic="true"></div>
        <button id="langPill" class="lang-pill" aria-label="Language: English" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-globe" aria-hidden="true"></i>
          <span>EN</span>
        </button>
        <div id="langDropdown" class="lang-dropdown" role="menu" aria-label="Language menu" hidden></div>
      </nav>
    </header>

    <main>
      <section class="hero">
        <h1>Discover the World of AI</h1>
        <p>Your curated collection of artificial intelligence resources</p>
      </section>

      <section class="categories" id="categories"></section>
    </main>

    <footer>
      <p>¬© 2024 AI Directory. All rights reserved.</p>
    </footer>

    <!-- Emergency fallback data -->
    <script>
      // Minimal fallback data for emergency rendering
      window.EMERGENCY_DATA = {
        categories: [
          {
            id: "chatbots",
            label: "Chatbots",
            title: "Chatbots & Language Models",
            items: [
              { href: "https://chat.openai.com", title: "ChatGPT", desc: "OpenAI's powerful language model" },
              { href: "https://claude.ai", title: "Claude", desc: "Anthropic's AI assistant" },
              { href: "https://gemini.google.com", title: "Google Gemini", desc: "Google's multimodal AI assistant" }
            ]
          },
          {
            id: "tools",
            label: "Tools",
            title: "AI Tools & Platforms",
            items: [
              { href: "https://huggingface.co", title: "Hugging Face", desc: "AI models and datasets" },
              { href: "https://platform.openai.com", title: "OpenAI Platform", desc: "APIs and developer tools" },
              { href: "https://pytorch.org", title: "PyTorch", desc: "Facebook's ML framework" }
            ]
          }
        ]
      };
    </script>

    <!-- Cookie consent banner -->
    <div id="cookieBanner" class="cookie-banner" role="dialog" aria-live="polite" aria-label="Cookie Consent" aria-modal="false" hidden>
      <div class="cookie-content">
        <div class="cookie-text">
          We use cookies for essential functionality and anonymous analytics. You can accept or decline analytics cookies.
        </div>
        <div class="cookie-actions">
          <button id="cookieReject" class="btn-secondary" aria-label="Decline analytics">Decline</button>
          <button id="cookieAccept" class="btn-primary" aria-label="Accept analytics">Accept</button>
        </div>
      </div>
    </div>

    <!-- Script loading with error tracking -->
    <script>
      // Track script loading status
      window.scriptLoadStatus = {
        sites: false,
        i18n: false,
        script: false
      };

      function loadScript(src, name, callback) {
        var script = document.createElement('script');
        script.src = src;
        script.onload = function() {
          console.log('‚úÖ ' + name + ' loaded successfully');
          if (callback) callback();
        };
        script.onerror = function() {
          console.error('‚ùå Failed to load ' + name + ' from ' + src);
          showDebugInfo('Failed to load ' + name);
        };
        document.head.appendChild(script);
      }

      // Load scripts in sequence
      loadScript('sites.js', 'sites.js', function() {
        window.scriptLoadStatus.sites = true;
        loadScript('i18n.js', 'i18n.js', function() {
          window.scriptLoadStatus.i18n = true;
          loadScript('script.js', 'script.js', function() {
            window.scriptLoadStatus.script = true;
            console.log('üéâ All scripts loaded');
          });
        });
      });
    </script>
    <script>
      // Enhanced debug information
      console.log('=== AI Directory Debug Info ===');
      console.log('Page loaded at:', new Date().toISOString());
      console.log('Current URL:', window.location.href);
      console.log('Current protocol:', window.location.protocol);

      // Check each script file individually
      console.log('sites.js loaded:', typeof window.SITES_DATA !== 'undefined');
      console.log('i18n.js loaded:', typeof window.I18N !== 'undefined');
      console.log('script.js loaded:', typeof renderFromData === 'function');

      // Check for specific data structures
      if (typeof window.SITES_DATA === 'undefined') {
        console.error('‚ùå SITES_DATA is not loaded! Check sites.js file.');
      } else {
        console.log('‚úÖ SITES_DATA loaded:', window.SITES_DATA);
        console.log('Categories count:', window.SITES_DATA.categories ? window.SITES_DATA.categories.length : 0);
      }

      if (typeof window.I18N === 'undefined') {
        console.error('‚ùå I18N is not loaded! Check i18n.js file.');
      } else {
        console.log('‚úÖ I18N loaded, languages:', Object.keys(window.I18N));
      }

      if (typeof renderFromData !== 'function') {
        console.error('‚ùå renderFromData function not found! Check script.js file.');
      } else {
        console.log('‚úÖ renderFromData function loaded');
      }

      // Check DOM elements
      console.log('DOM elements check:');
      console.log('- categoriesContainer:', document.getElementById('categories') ? 'found' : 'missing');
      console.log('- searchInput:', document.getElementById('searchInput') ? 'found' : 'missing');

      // Try to manually trigger rendering if needed
      if (window.SITES_DATA && window.I18N && renderFromData) {
        console.log('üîÑ Attempting manual render...');
        try {
          renderFromData(window.SITES_DATA);
          console.log('‚úÖ Manual render successful');
        } catch (error) {
          console.error('‚ùå Manual render failed:', error);
        }
      }

      console.log('=== Debug Info End ===');
    </script>
  <!-- Fallback content for debugging -->
    <div id="debug-info" style="display: none; position: fixed; bottom: 10px; right: 10px; background: #f0f0f0; padding: 10px; border: 1px solid #ccc; font-family: monospace; font-size: 12px; max-width: 300px;">
      <strong>Debug Info:</strong><br>
      <span id="debug-status">Loading...</span>
    </div>

    <script>
      // Show debug info if JS fails
      function showDebugInfo(message) {
        var debugDiv = document.getElementById('debug-info');
        var debugSpan = document.getElementById('debug-status');
        if (debugDiv && debugSpan) {
          debugDiv.style.display = 'block';
          debugSpan.innerHTML = message;
        }
      }

      // Fallback render if main scripts fail
      function fallbackRender() {
        try {
          var data = window.SITES_DATA || window.EMERGENCY_DATA;
          if (data && data.categories) {
            var container = document.getElementById('categories');
            if (container) {
              container.innerHTML = '<h2 style="color: orange;">‚ö†Ô∏è Fallback Mode - Limited Features</h2>';
              data.categories.forEach(function(cat) {
                var catDiv = document.createElement('div');
                catDiv.style.marginBottom = '20px';
                catDiv.innerHTML = '<h3>' + (cat.title || cat.label) + '</h3>';
                if (cat.items) {
                  cat.items.forEach(function(item) {
                    var itemDiv = document.createElement('div');
                    itemDiv.style.marginBottom = '10px';
                    itemDiv.innerHTML = '<a href="' + item.href + '" target="_blank" style="color: #0066cc; text-decoration: none; font-weight: bold;">' + item.title + '</a><br><small style="color: #666;">' + item.desc + '</small>';
                    catDiv.appendChild(itemDiv);
                  });
                }
                container.appendChild(catDiv);
              });
              showDebugInfo('‚úÖ Fallback render successful with ' + data.categories.length + ' categories');
            }
          } else {
            showDebugInfo('‚ùå No data available (SITES_DATA or EMERGENCY_DATA)');
          }
        } catch (error) {
          showDebugInfo('‚ùå Fallback render failed: ' + error.message);
        }
      }

      // Try to run fallback after 2 seconds if main scripts haven't worked
      setTimeout(function() {
        var container = document.getElementById('categories');
        var debugInfo = document.getElementById('debug-info');

        console.log('Checking if fallback render is needed...');
        console.log('Container found:', !!container);
        console.log('Container content:', container ? container.innerHTML.trim() : 'no container');
        console.log('Script load status:', window.scriptLoadStatus);

        if (container && container.innerHTML.trim() === '') {
          console.warn('‚ö†Ô∏è Main scripts failed, attempting fallback render...');
          fallbackRender();
          if (debugInfo) {
            debugInfo.style.display = 'block';
          }
        }
      }, 2000);
    </script>
  </body>
</html>
